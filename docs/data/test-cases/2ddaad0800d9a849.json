{"uid":"2ddaad0800d9a849","name":"test_monitor_select3","fullName":"Tests.test_system.test_monitor.TestSMonitorPage#test_monitor_select3","historyId":"a8707844dcb3a19644a1f38a505d01d2","time":{"start":1769551968621,"stop":1769551968621,"duration":0},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: 点击失败，找不到元素：xpath = (//span[text()=\"平台监控\"])[1]","statusTrace":"self = <Pages.itemsPage.login_page.LoginPage object at 0x000001EC04159F30>, by_or_element = 'xpath', value = '(//span[text()=\"平台监控\"])[1]', wait_time = 10, retries = 2\n\n    def click(self, by_or_element, value=None, wait_time=10, retries=2):\n        \"\"\"\n        更稳健的点击方法：支持定位符或 WebElement，自动处理 stale 元素、点击拦截等问题。\n        \"\"\"\n        for attempt in range(retries):\n            try:\n                if value is not None:\n                    by = by_or_element\n                    logging.info(f\"点击元素：By = {by}, Value = {value}\")\n>                   element = WebDriverWait(self.driver, wait_time).until(\n                        EC.element_to_be_clickable((by, value))\n                    )\n\nPages\\base_page.py:49: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"2e0498e6bc0f2fbad76cdbb8524a2d97\")>, method = <function element_to_be_clickable.<locals>._predicate at 0x000001EC04B6EB00>, message = ''\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Wait until the method returns a value that is not False.\n    \n        Calls the method provided with the driver as an argument until the\n        return value does not evaluate to ``False``.\n    \n        Parameters:\n        -----------\n        method: callable(WebDriver)\n            - A callable object that takes a WebDriver instance as an argument.\n    \n        message: str\n            - Optional message for :exc:`TimeoutException`\n    \n        Return:\n        -------\n        object: T\n            - The result of the last call to `method`\n    \n        Raises:\n        -------\n        TimeoutException\n            - If 'method' does not return a truthy value within the WebDriverWait\n            object's timeout\n    \n        Example:\n        --------\n        >>> from selenium.webdriver.common.by import By\n        >>> from selenium.webdriver.support.ui import WebDriverWait\n        >>> from selenium.webdriver.support import expected_conditions as EC\n    \n        # Wait until an element is visible on the page\n        >>> wait = WebDriverWait(driver, 10)\n        >>> element = wait.until(EC.visibility_of_element_located((By.ID, \"exampleId\")))\n        >>> print(element.text)\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            if time.monotonic() > end_time:\n                break\n            time.sleep(self._poll)\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       Symbols not available. Dumping unresolved backtrace:\nE       \t0x7ff7a57dfe35\nE       \t0x7ff7a57dfe90\nE       \t0x7ff7a556139d\nE       \t0x7ff7a55b9d8e\nE       \t0x7ff7a55ba09c\nE       \t0x7ff7a560e8d7\nE       \t0x7ff7a560b61b\nE       \t0x7ff7a55aac6d\nE       \t0x7ff7a55abae3\nE       \t0x7ff7a5aaa10d\nE       \t0x7ff7a5aa448a\nE       \t0x7ff7a5ac5157\nE       \t0x7ff7a57fa81e\nE       \t0x7ff7a580262f\nE       \t0x7ff7a57e9324\nE       \t0x7ff7a57e94df\nE       \t0x7ff7a57cee88\nE       \t0x7ffc59d27374\nE       \t0x7ffc5a9fcc91\n\nD:\\Python310\\lib\\site-packages\\selenium\\webdriver\\support\\wait.py:138: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\n    @pytest.fixture(scope=\"module\")  # (scope=\"class\")这个参数表示整个测试类共用同一个浏览器，默认一个用例执行一次\n    def login_to_monitor():\n        driver = None\n        try:\n            \"\"\"初始化并返回 driver\"\"\"\n            date_driver = DateDriver()\n            driver = create_driver(date_driver.driver_path)\n            driver.implicitly_wait(3)\n    \n            # 初始化登录页面\n            page = LoginPage(driver)  # 初始化登录页面\n            url = date_driver.url\n            print(f\"[INFO] 正在导航到 URL: {url}\")\n            # 尝试访问 URL，捕获连接错误\n            for attempt in range(2):\n                try:\n                    page.navigate_to(url)\n                    break\n                except WebDriverException as e:\n                    capture_screenshot(driver, f\"login_fail_{attempt + 1}\")\n                    logging.warning(f\"第 {attempt + 1} 次连接失败: {e}\")\n                    driver.refresh()\n                    sleep(date_driver.URL_RETRY_WAIT)\n            else:\n                logging.error(\"连接失败多次，测试中止\")\n                safe_quit(driver)\n                raise RuntimeError(\"无法连接到登录页面\")\n    \n            page.login(date_driver.username, date_driver.password, date_driver.planning)\n            list_ = [\"系统管理\", \"系统设置\", \"平台监控\"]\n            for v in list_:\n>               page.click_button(f'(//span[text()=\"{v}\"])[1]')\n\nTests\\test_system\\test_monitor.py:53: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nPages\\itemsPage\\login_page.py:25: in click_button\n    self.click(By.XPATH, xpath)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Pages.itemsPage.login_page.LoginPage object at 0x000001EC04159F30>, by_or_element = 'xpath', value = '(//span[text()=\"平台监控\"])[1]', wait_time = 10, retries = 2\n\n    def click(self, by_or_element, value=None, wait_time=10, retries=2):\n        \"\"\"\n        更稳健的点击方法：支持定位符或 WebElement，自动处理 stale 元素、点击拦截等问题。\n        \"\"\"\n        for attempt in range(retries):\n            try:\n                if value is not None:\n                    by = by_or_element\n                    logging.info(f\"点击元素：By = {by}, Value = {value}\")\n                    element = WebDriverWait(self.driver, wait_time).until(\n                        EC.element_to_be_clickable((by, value))\n                    )\n                else:\n                    logging.info(\"点击元素：WebElement 对象\")\n                    element = by_or_element\n    \n                element.click()\n                logging.info(\"✅ 点击成功\")\n                return\n    \n            except ElementClickInterceptedException:\n                logging.warning(\"⚠️ 原生点击被拦截，尝试使用 JS 点击\")\n                try:\n                    self.driver.execute_script(\"arguments[0].click();\", element)\n                    logging.info(\"✅ JS 点击成功\")\n                    return\n                except Exception as js_error:\n                    logging.warning(f\"⚠️ JS 点击失败：{js_error}\")\n                    sleep(1)\n                    continue  # 下一轮重试\n    \n            except StaleElementReferenceException:\n                logging.warning(f\"⚠️ 第 {attempt + 1} 次点击失败：元素过期，尝试重新定位\")\n                sleep(1)\n                continue  # 下一轮重试时重新定位\n    \n            except TimeoutException:\n                logging.error(f\"❌ 元素未在 {wait_time} 秒内变为可点击\")\n>               raise TimeoutException(f\"点击失败，找不到元素：{by_or_element} = {value}\")\nE               selenium.common.exceptions.TimeoutException: Message: 点击失败，找不到元素：xpath = (//span[text()=\"平台监控\"])[1]\n\nPages\\base_page.py:78: TimeoutException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login_to_monitor","time":{"start":1769551968624,"stop":1769551995320,"duration":26696},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: 点击失败，找不到元素：xpath = (//span[text()=\"平台监控\"])[1]\n\n","statusTrace":"  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"D:\\Python310\\lib\\site-packages\\_pytest\\setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"D:\\Python310\\lib\\site-packages\\_pytest\\fixtures.py\", line 1195, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"D:\\Python310\\lib\\site-packages\\_pytest\\fixtures.py\", line 922, in call_fixture_func\n    fixture_result = next(generator)\n  File \"D:\\PycharmProjects\\APS\\Tests\\test_system\\test_monitor.py\", line 53, in login_to_monitor\n    page.click_button(f'(//span[text()=\"{v}\"])[1]')\n  File \"D:\\PycharmProjects\\APS\\Pages\\itemsPage\\login_page.py\", line 25, in click_button\n    self.click(By.XPATH, xpath)\n  File \"D:\\PycharmProjects\\APS\\Pages\\base_page.py\", line 78, in click\n    raise TimeoutException(f\"点击失败，找不到元素：{by_or_element} = {value}\")\n","steps":[],"attachments":[{"uid":"3d7200245ed236d6","name":"Tests_test_system_test_monitor.py_20260128_061313","source":"3d7200245ed236d6.png","type":"image/png","size":260691},{"uid":"6b11a261a36ae51f","name":"Tests_test_system_test_monitor.py_20260128_061313","source":"6b11a261a36ae51f.png","type":"image/png","size":19252},{"uid":"d7578db0316428a0","name":"Tests_test_system_test_monitor.py_20260128_061313","source":"d7578db0316428a0.png","type":"image/png","size":25727},{"uid":"bd32fd177ca7e1be","name":"Tests_test_system_test_monitor.py_20260128_061313","source":"bd32fd177ca7e1be.png","type":"image/png","size":19252},{"uid":"235887cc2eff15e0","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"235887cc2eff15e0.png","type":"image/png","size":19252},{"uid":"94f0b83353112c11","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"94f0b83353112c11.png","type":"image/png","size":25727},{"uid":"8aa7ed2e579315d1","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"8aa7ed2e579315d1.png","type":"image/png","size":25727},{"uid":"7c127c1e22851a6","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"7c127c1e22851a6.png","type":"image/png","size":19252},{"uid":"1ae14a3bbd58c100","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"1ae14a3bbd58c100.png","type":"image/png","size":25727},{"uid":"7c10803edfe5a321","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"7c10803edfe5a321.png","type":"image/png","size":25727},{"uid":"f5d8830b5c1951fe","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"f5d8830b5c1951fe.png","type":"image/png","size":19252},{"uid":"823e69b2260c7717","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"823e69b2260c7717.png","type":"image/png","size":25727},{"uid":"d0d794c65e697652","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"d0d794c65e697652.png","type":"image/png","size":25727},{"uid":"b5f5ed94d7f3be36","name":"Tests_test_system_test_monitor.py_20260128_061314","source":"b5f5ed94d7f3be36.png","type":"image/png","size":25727},{"uid":"5045d26cdc2a8c92","name":"Tests_test_system_test_monitor.py_20260128_061315","source":"5045d26cdc2a8c92.png","type":"image/png","size":19252},{"uid":"7af9a8d8e58a499f","name":"Tests_test_system_test_monitor.py_20260128_061315","source":"7af9a8d8e58a499f.png","type":"image/png","size":25727},{"uid":"4b60e85090725fbb","name":"Tests_test_system_test_monitor.py_20260128_061315","source":"4b60e85090725fbb.png","type":"image/png","size":19252}],"parameters":[],"attachmentStep":false,"hasContent":true,"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":17},{"name":"login_to_monitor","time":{"start":1769551997123,"stop":1769552024393,"duration":27270},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: 点击失败，找不到元素：xpath = (//span[text()=\"平台监控\"])[1]\n\n","statusTrace":"  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"D:\\Python310\\lib\\site-packages\\_pytest\\setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n  File \"D:\\Python310\\lib\\site-packages\\pluggy\\_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"D:\\Python310\\lib\\site-packages\\_pytest\\fixtures.py\", line 1195, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"D:\\Python310\\lib\\site-packages\\_pytest\\fixtures.py\", line 922, in call_fixture_func\n    fixture_result = next(generator)\n  File \"D:\\PycharmProjects\\APS\\Tests\\test_system\\test_monitor.py\", line 53, in login_to_monitor\n    page.click_button(f'(//span[text()=\"{v}\"])[1]')\n  File \"D:\\PycharmProjects\\APS\\Pages\\itemsPage\\login_page.py\", line 25, in click_button\n    self.click(By.XPATH, xpath)\n  File \"D:\\PycharmProjects\\APS\\Pages\\base_page.py\", line 78, in click\n    raise TimeoutException(f\"点击失败，找不到元素：{by_or_element} = {value}\")\n","steps":[],"attachments":[{"uid":"c5e857175f144375","name":"Tests_test_system_test_monitor.py_20260128_061342","source":"c5e857175f144375.png","type":"image/png","size":258668},{"uid":"cb061834a911b9a5","name":"Tests_test_system_test_monitor.py_20260128_061342","source":"cb061834a911b9a5.png","type":"image/png","size":19252},{"uid":"c19c6ec761e14ffb","name":"Tests_test_system_test_monitor.py_20260128_061342","source":"c19c6ec761e14ffb.png","type":"image/png","size":25727},{"uid":"638432fdd296185f","name":"Tests_test_system_test_monitor.py_20260128_061342","source":"638432fdd296185f.png","type":"image/png","size":19252},{"uid":"3310e202925719ef","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"3310e202925719ef.png","type":"image/png","size":19252},{"uid":"b7edfc891a45b380","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"b7edfc891a45b380.png","type":"image/png","size":25727},{"uid":"c06be7418b1012ff","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"c06be7418b1012ff.png","type":"image/png","size":25727},{"uid":"3cfd98b45aa925c5","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"3cfd98b45aa925c5.png","type":"image/png","size":19252},{"uid":"b8c344a030d388d0","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"b8c344a030d388d0.png","type":"image/png","size":25727},{"uid":"8cdf664dd9666d01","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"8cdf664dd9666d01.png","type":"image/png","size":25727},{"uid":"a7e9558f7b72b6fd","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"a7e9558f7b72b6fd.png","type":"image/png","size":19252},{"uid":"edb9963900fe0683","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"edb9963900fe0683.png","type":"image/png","size":25727},{"uid":"9331ffc17789a445","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"9331ffc17789a445.png","type":"image/png","size":25727},{"uid":"752a508fae3ea7a5","name":"Tests_test_system_test_monitor.py_20260128_061343","source":"752a508fae3ea7a5.png","type":"image/png","size":25727},{"uid":"1a7377679d305ced","name":"Tests_test_system_test_monitor.py_20260128_061344","source":"1a7377679d305ced.png","type":"image/png","size":19252},{"uid":"eeed8c639f17d64e","name":"Tests_test_system_test_monitor.py_20260128_061344","source":"eeed8c639f17d64e.png","type":"image/png","size":25727},{"uid":"6f2ab0be8948937a","name":"Tests_test_system_test_monitor.py_20260128_061344","source":"6f2ab0be8948937a.png","type":"image/png","size":19252}],"parameters":[],"attachmentStep":false,"hasContent":true,"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":17}],"testStage":{"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: 点击失败，找不到元素：xpath = (//span[text()=\"平台监控\"])[1]","statusTrace":"self = <Pages.itemsPage.login_page.LoginPage object at 0x000001EC04159F30>, by_or_element = 'xpath', value = '(//span[text()=\"平台监控\"])[1]', wait_time = 10, retries = 2\n\n    def click(self, by_or_element, value=None, wait_time=10, retries=2):\n        \"\"\"\n        更稳健的点击方法：支持定位符或 WebElement，自动处理 stale 元素、点击拦截等问题。\n        \"\"\"\n        for attempt in range(retries):\n            try:\n                if value is not None:\n                    by = by_or_element\n                    logging.info(f\"点击元素：By = {by}, Value = {value}\")\n>                   element = WebDriverWait(self.driver, wait_time).until(\n                        EC.element_to_be_clickable((by, value))\n                    )\n\nPages\\base_page.py:49: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"2e0498e6bc0f2fbad76cdbb8524a2d97\")>, method = <function element_to_be_clickable.<locals>._predicate at 0x000001EC04B6EB00>, message = ''\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Wait until the method returns a value that is not False.\n    \n        Calls the method provided with the driver as an argument until the\n        return value does not evaluate to ``False``.\n    \n        Parameters:\n        -----------\n        method: callable(WebDriver)\n            - A callable object that takes a WebDriver instance as an argument.\n    \n        message: str\n            - Optional message for :exc:`TimeoutException`\n    \n        Return:\n        -------\n        object: T\n            - The result of the last call to `method`\n    \n        Raises:\n        -------\n        TimeoutException\n            - If 'method' does not return a truthy value within the WebDriverWait\n            object's timeout\n    \n        Example:\n        --------\n        >>> from selenium.webdriver.common.by import By\n        >>> from selenium.webdriver.support.ui import WebDriverWait\n        >>> from selenium.webdriver.support import expected_conditions as EC\n    \n        # Wait until an element is visible on the page\n        >>> wait = WebDriverWait(driver, 10)\n        >>> element = wait.until(EC.visibility_of_element_located((By.ID, \"exampleId\")))\n        >>> print(element.text)\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            if time.monotonic() > end_time:\n                break\n            time.sleep(self._poll)\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       Symbols not available. Dumping unresolved backtrace:\nE       \t0x7ff7a57dfe35\nE       \t0x7ff7a57dfe90\nE       \t0x7ff7a556139d\nE       \t0x7ff7a55b9d8e\nE       \t0x7ff7a55ba09c\nE       \t0x7ff7a560e8d7\nE       \t0x7ff7a560b61b\nE       \t0x7ff7a55aac6d\nE       \t0x7ff7a55abae3\nE       \t0x7ff7a5aaa10d\nE       \t0x7ff7a5aa448a\nE       \t0x7ff7a5ac5157\nE       \t0x7ff7a57fa81e\nE       \t0x7ff7a580262f\nE       \t0x7ff7a57e9324\nE       \t0x7ff7a57e94df\nE       \t0x7ff7a57cee88\nE       \t0x7ffc59d27374\nE       \t0x7ffc5a9fcc91\n\nD:\\Python310\\lib\\site-packages\\selenium\\webdriver\\support\\wait.py:138: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\n    @pytest.fixture(scope=\"module\")  # (scope=\"class\")这个参数表示整个测试类共用同一个浏览器，默认一个用例执行一次\n    def login_to_monitor():\n        driver = None\n        try:\n            \"\"\"初始化并返回 driver\"\"\"\n            date_driver = DateDriver()\n            driver = create_driver(date_driver.driver_path)\n            driver.implicitly_wait(3)\n    \n            # 初始化登录页面\n            page = LoginPage(driver)  # 初始化登录页面\n            url = date_driver.url\n            print(f\"[INFO] 正在导航到 URL: {url}\")\n            # 尝试访问 URL，捕获连接错误\n            for attempt in range(2):\n                try:\n                    page.navigate_to(url)\n                    break\n                except WebDriverException as e:\n                    capture_screenshot(driver, f\"login_fail_{attempt + 1}\")\n                    logging.warning(f\"第 {attempt + 1} 次连接失败: {e}\")\n                    driver.refresh()\n                    sleep(date_driver.URL_RETRY_WAIT)\n            else:\n                logging.error(\"连接失败多次，测试中止\")\n                safe_quit(driver)\n                raise RuntimeError(\"无法连接到登录页面\")\n    \n            page.login(date_driver.username, date_driver.password, date_driver.planning)\n            list_ = [\"系统管理\", \"系统设置\", \"平台监控\"]\n            for v in list_:\n>               page.click_button(f'(//span[text()=\"{v}\"])[1]')\n\nTests\\test_system\\test_monitor.py:53: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nPages\\itemsPage\\login_page.py:25: in click_button\n    self.click(By.XPATH, xpath)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Pages.itemsPage.login_page.LoginPage object at 0x000001EC04159F30>, by_or_element = 'xpath', value = '(//span[text()=\"平台监控\"])[1]', wait_time = 10, retries = 2\n\n    def click(self, by_or_element, value=None, wait_time=10, retries=2):\n        \"\"\"\n        更稳健的点击方法：支持定位符或 WebElement，自动处理 stale 元素、点击拦截等问题。\n        \"\"\"\n        for attempt in range(retries):\n            try:\n                if value is not None:\n                    by = by_or_element\n                    logging.info(f\"点击元素：By = {by}, Value = {value}\")\n                    element = WebDriverWait(self.driver, wait_time).until(\n                        EC.element_to_be_clickable((by, value))\n                    )\n                else:\n                    logging.info(\"点击元素：WebElement 对象\")\n                    element = by_or_element\n    \n                element.click()\n                logging.info(\"✅ 点击成功\")\n                return\n    \n            except ElementClickInterceptedException:\n                logging.warning(\"⚠️ 原生点击被拦截，尝试使用 JS 点击\")\n                try:\n                    self.driver.execute_script(\"arguments[0].click();\", element)\n                    logging.info(\"✅ JS 点击成功\")\n                    return\n                except Exception as js_error:\n                    logging.warning(f\"⚠️ JS 点击失败：{js_error}\")\n                    sleep(1)\n                    continue  # 下一轮重试\n    \n            except StaleElementReferenceException:\n                logging.warning(f\"⚠️ 第 {attempt + 1} 次点击失败：元素过期，尝试重新定位\")\n                sleep(1)\n                continue  # 下一轮重试时重新定位\n    \n            except TimeoutException:\n                logging.error(f\"❌ 元素未在 {wait_time} 秒内变为可点击\")\n>               raise TimeoutException(f\"点击失败，找不到元素：{by_or_element} = {value}\")\nE               selenium.common.exceptions.TimeoutException: Message: 点击失败，找不到元素：xpath = (//span[text()=\"平台监控\"])[1]\n\nPages\\base_page.py:78: TimeoutException","steps":[],"attachments":[{"uid":"458bb2c5143c3ef8","name":"test_monitor_select3_20260128_061315","source":"458bb2c5143c3ef8.png","type":"image/png","size":259644},{"uid":"ff4544eebba33bd2","name":"test_monitor_select3_20260128_061315","source":"ff4544eebba33bd2.png","type":"image/png","size":19252},{"uid":"3fbb1c19b5534b30","name":"test_monitor_select3_20260128_061315","source":"3fbb1c19b5534b30.png","type":"image/png","size":25727},{"uid":"c828dad80e124708","name":"test_monitor_select3_20260128_061315","source":"c828dad80e124708.png","type":"image/png","size":19252},{"uid":"fede6ced68c802cc","name":"test_monitor_select3_20260128_061315","source":"fede6ced68c802cc.png","type":"image/png","size":19252},{"uid":"e877fa22d770b40b","name":"test_monitor_select3_20260128_061315","source":"e877fa22d770b40b.png","type":"image/png","size":25727},{"uid":"e366119223161c1a","name":"test_monitor_select3_20260128_061316","source":"e366119223161c1a.png","type":"image/png","size":25727},{"uid":"482f0dcaf74a9b96","name":"test_monitor_select3_20260128_061316","source":"482f0dcaf74a9b96.png","type":"image/png","size":19252},{"uid":"9e87f1907960329f","name":"test_monitor_select3_20260128_061316","source":"9e87f1907960329f.png","type":"image/png","size":25727},{"uid":"d62979782b491581","name":"test_monitor_select3_20260128_061316","source":"d62979782b491581.png","type":"image/png","size":25727},{"uid":"93869df5e36af4b4","name":"test_monitor_select3_20260128_061316","source":"93869df5e36af4b4.png","type":"image/png","size":19252},{"uid":"d6eab2be7abc0100","name":"test_monitor_select3_20260128_061316","source":"d6eab2be7abc0100.png","type":"image/png","size":25727},{"uid":"faa3d22e5f0a608c","name":"test_monitor_select3_20260128_061316","source":"faa3d22e5f0a608c.png","type":"image/png","size":25727},{"uid":"e7e2fe56d8bb8a8b","name":"test_monitor_select3_20260128_061316","source":"e7e2fe56d8bb8a8b.png","type":"image/png","size":25727},{"uid":"179ee11e81329a66","name":"test_monitor_select3_20260128_061316","source":"179ee11e81329a66.png","type":"image/png","size":19252},{"uid":"292ab07777480351","name":"test_monitor_select3_20260128_061316","source":"292ab07777480351.png","type":"image/png","size":25727},{"uid":"efbecfca0a383b1b","name":"test_monitor_select3_20260128_061317","source":"efbecfca0a383b1b.png","type":"image/png","size":19252},{"uid":"d9f6917968a6aeb1","name":"log","source":"d9f6917968a6aeb1.txt","type":"text/plain","size":12313}],"parameters":[],"attachmentStep":false,"hasContent":true,"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":18},"afterStages":[],"labels":[{"name":"story","value":"查询不报错"},{"name":"feature","value":"平台监控页用例"},{"name":"parentSuite","value":"Tests.test_system"},{"name":"suite","value":"test_monitor"},{"name":"subSuite","value":"TestSMonitorPage"},{"name":"host","value":"DESKTOP-L7L44NB"},{"name":"thread","value":"15128-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Tests.test_system.test_monitor"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"2ddaad0800d9a849.json","parameterValues":[]}