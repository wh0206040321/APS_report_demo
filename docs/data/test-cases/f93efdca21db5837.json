{"uid":"f93efdca21db5837","name":"test_user_lock2","fullName":"Tests.test_system.test_userRole.TestUserRolePage#test_user_lock2","historyId":"0a038d9fd0274e6e978cd4e786ceb0bc","time":{"start":1768418335543,"stop":1768418368621,"duration":33078},"status":"failed","statusMessage":"AssertionError: assert 1 == 0\n +  where 1 = len([<selenium.webdriver.remote.webelement.WebElement (session=\"c06db93a40451cf9824dd36447dc0853\", element=\"f.DBC428579875C0A78879F1DB011BA608.d.2386273F72A7EBCBBE14E0C7976FAACE.e.1598\")>])","statusTrace":"self = <test_system.test_userRole.TestUserRolePage object at 0x000001F15DF2F280>, login_to_userrole = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"c06db93a40451cf9824dd36447dc0853\")>\n\n    @allure.story(\"当前用户被锁定，点击解除当前锁定，取消锁定成功\")\n    # @pytest.mark.run(order=1)\n    def test_user_lock2(self, login_to_userrole):\n        driver = login_to_userrole  # WebDriver 实例\n        user = UserRolePage(driver)  # 用 driver 初始化 UserRolePage\n        page = LoginPage(driver)\n        date_driver = DateDriver()\n        password = 'Qw123456'\n        name = '1user2'\n        user.select_input(name)\n        sleep(1)\n        user.click_button(f'//table[@class=\"vxe-table--body\"]//tr/td[2]//span[text()=\"{name}\"]')\n        # sleep(1)\n        # user.click_all_button(\"编辑\")\n        # sleep(1)\n        # sy = user.get_find_element_xpath('(//div[label[text()=\"是否锁定\"]]/div//span)[1]').get_attribute(\"class\")\n        # if 'ivu-checkbox-checked' in sy:\n        #     user.click_button('(//div[label[text()=\"是否锁定\"]]/div//span)[1]')\n        # sleep(1)\n        # user.click_all_button(\"保存\")\n        # user.get_find_message()\n        # user.right_refresh()\n        # user.select_input(name)\n        # sleep(1)\n        table_sy = user.get_find_element_xpath(\n            f'//table[@class=\"vxe-table--body\"]//tr[td[2]//span[text()=\"{name}\"]]/td[6]//span[1]').get_attribute(\n            \"class\")\n        if 'vxe-icon-checkbox-checked-fill' in table_sy:\n            user.click_all_button('解除当前锁定')\n            user.click_button('//div[@class=\"ivu-modal-confirm-footer\"]//span[text()=\"确定\"]')\n            message = user.get_find_message()\n            assert message == \"修改成功\"\n        else:\n            assert 1 == 0\n    \n        user.click_button('//div[@class=\"flex-alignItems-center\"]')\n        user.click_button('//ul/li/div[text()=\" 注销 \"]')\n        page.login(name, password, '1测试计划单元小日程')\n        err = user.finds_elements(By.XPATH, f'//div[@class=\"ivu-modal-body\"]//div[text()=\"当前用户已经登录此单元，是否继续登录？\"]')\n        if len(err) == 1:\n            user.click_button('//div[@class=\"ivu-modal-confirm-footer\"]//span[text()=\"确定\"]')\n    \n        user.wait_for_loadingbox()\n        profile_icon = user.get_find_element_xpath(\n            f'//div[text()=\" 1测试计划单元小日程 \"]'\n        )\n        assert profile_icon.is_displayed()\n        user.click_button('//div[@class=\"flex-alignItems-center\"]')\n        user.click_button('//ul/li/div[text()=\" 注销 \"]')\n        page.login(date_driver.username, date_driver.password, date_driver.planning)\n        user.wait_for_loadingbox()\n        list_ = [\"系统管理\", \"系统设置\", \"用户权限管理\"]\n        for v in list_:\n            page.click_button(f'(//span[text()=\"{v}\"])[1]')\n        user.wait_for_loading_to_disappear()\n>       assert len(err) == 0\nE       assert 1 == 0\nE        +  where 1 = len([<selenium.webdriver.remote.webelement.WebElement (session=\"c06db93a40451cf9824dd36447dc0853\", element=\"f.DBC428579875C0A78879F1DB011BA608.d.2386273F72A7EBCBBE14E0C7976FAACE.e.1598\")>])\n\nTests\\test_system\\test_userRole.py:588: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"login_to_userrole","time":{"start":1768418075256,"stop":1768418091556,"duration":16300},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 1 == 0\n +  where 1 = len([<selenium.webdriver.remote.webelement.WebElement (session=\"c06db93a40451cf9824dd36447dc0853\", element=\"f.DBC428579875C0A78879F1DB011BA608.d.2386273F72A7EBCBBE14E0C7976FAACE.e.1598\")>])","statusTrace":"self = <test_system.test_userRole.TestUserRolePage object at 0x000001F15DF2F280>, login_to_userrole = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"c06db93a40451cf9824dd36447dc0853\")>\n\n    @allure.story(\"当前用户被锁定，点击解除当前锁定，取消锁定成功\")\n    # @pytest.mark.run(order=1)\n    def test_user_lock2(self, login_to_userrole):\n        driver = login_to_userrole  # WebDriver 实例\n        user = UserRolePage(driver)  # 用 driver 初始化 UserRolePage\n        page = LoginPage(driver)\n        date_driver = DateDriver()\n        password = 'Qw123456'\n        name = '1user2'\n        user.select_input(name)\n        sleep(1)\n        user.click_button(f'//table[@class=\"vxe-table--body\"]//tr/td[2]//span[text()=\"{name}\"]')\n        # sleep(1)\n        # user.click_all_button(\"编辑\")\n        # sleep(1)\n        # sy = user.get_find_element_xpath('(//div[label[text()=\"是否锁定\"]]/div//span)[1]').get_attribute(\"class\")\n        # if 'ivu-checkbox-checked' in sy:\n        #     user.click_button('(//div[label[text()=\"是否锁定\"]]/div//span)[1]')\n        # sleep(1)\n        # user.click_all_button(\"保存\")\n        # user.get_find_message()\n        # user.right_refresh()\n        # user.select_input(name)\n        # sleep(1)\n        table_sy = user.get_find_element_xpath(\n            f'//table[@class=\"vxe-table--body\"]//tr[td[2]//span[text()=\"{name}\"]]/td[6]//span[1]').get_attribute(\n            \"class\")\n        if 'vxe-icon-checkbox-checked-fill' in table_sy:\n            user.click_all_button('解除当前锁定')\n            user.click_button('//div[@class=\"ivu-modal-confirm-footer\"]//span[text()=\"确定\"]')\n            message = user.get_find_message()\n            assert message == \"修改成功\"\n        else:\n            assert 1 == 0\n    \n        user.click_button('//div[@class=\"flex-alignItems-center\"]')\n        user.click_button('//ul/li/div[text()=\" 注销 \"]')\n        page.login(name, password, '1测试计划单元小日程')\n        err = user.finds_elements(By.XPATH, f'//div[@class=\"ivu-modal-body\"]//div[text()=\"当前用户已经登录此单元，是否继续登录？\"]')\n        if len(err) == 1:\n            user.click_button('//div[@class=\"ivu-modal-confirm-footer\"]//span[text()=\"确定\"]')\n    \n        user.wait_for_loadingbox()\n        profile_icon = user.get_find_element_xpath(\n            f'//div[text()=\" 1测试计划单元小日程 \"]'\n        )\n        assert profile_icon.is_displayed()\n        user.click_button('//div[@class=\"flex-alignItems-center\"]')\n        user.click_button('//ul/li/div[text()=\" 注销 \"]')\n        page.login(date_driver.username, date_driver.password, date_driver.planning)\n        user.wait_for_loadingbox()\n        list_ = [\"系统管理\", \"系统设置\", \"用户权限管理\"]\n        for v in list_:\n            page.click_button(f'(//span[text()=\"{v}\"])[1]')\n        user.wait_for_loading_to_disappear()\n>       assert len(err) == 0\nE       assert 1 == 0\nE        +  where 1 = len([<selenium.webdriver.remote.webelement.WebElement (session=\"c06db93a40451cf9824dd36447dc0853\", element=\"f.DBC428579875C0A78879F1DB011BA608.d.2386273F72A7EBCBBE14E0C7976FAACE.e.1598\")>])\n\nTests\\test_system\\test_userRole.py:588: AssertionError","steps":[],"attachments":[{"uid":"1382595bd7776472","name":"test_user_lock2_20260115_031928","source":"1382595bd7776472.png","type":"image/png","size":199603},{"uid":"e969b04b5a4ec42f","name":"log","source":"e969b04b5a4ec42f.txt","type":"text/plain","size":3566}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"attachmentsCount":2},"afterStages":[{"name":"login_to_userrole::0","time":{"start":1768418824237,"stop":1768418826404,"duration":2167},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"story","value":"当前用户被锁定，点击解除当前锁定，取消锁定成功"},{"name":"feature","value":"用户权限管理页用例"},{"name":"parentSuite","value":"Tests.test_system"},{"name":"suite","value":"test_userRole"},{"name":"subSuite","value":"TestUserRolePage"},{"name":"host","value":"DESKTOP-L7L44NB"},{"name":"thread","value":"19716-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Tests.test_system.test_userRole"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"f93efdca21db5837.json","parameterValues":[]}